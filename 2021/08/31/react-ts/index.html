<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>React(Hooks)+Typescript ç±»å‹å®šä¹‰å®è·µ | å”å‡¯å¼ºçš„ç½‘ç»œåšå®¢</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="React ç»“åˆ Typescript çš„å¼€å‘æ¨¡å¼ï¼Œåœ¨å¤§å‹é¡¹ç›®ä¸­è¿ç”¨æ¯”è¾ƒå¹¿æ³›ã€‚æœ¬æ–‡å€Ÿé‰´ï¼ˆæŠ„ï¼‰äº†ä¸€äº›æ–‡ç« ï¼Œå°±ç±»å‹å®šä¹‰åšäº†ä¸€äº›æ€»ç»“ï¼Œæœ‰æ›´å¤šçš„å¯ä»¥è¡¥å……ã€‚

æ•°æ®ç±»å‹å®šä¹‰

åŸºç¡€ç±»å‹

interface IProps {
  name: string; //å­—ç¬¦ä¸²
  done: boolean; //å¸ƒå°”å€¼
  age: number; //æ•°å­—
  list: numb ...">
    
    <link rel="preload" href="/front-end-campus/assets/css/0.styles.80bf0f19.css" as="style"><link rel="preload" href="/front-end-campus/assets/js/app.a4e593e1.js" as="script"><link rel="preload" href="/front-end-campus/assets/js/9.5c9b8525.js" as="script"><link rel="preload" href="/front-end-campus/assets/js/3.ae2e5539.js" as="script"><link rel="preload" href="/front-end-campus/assets/js/53.7bc5484f.js" as="script"><link rel="prefetch" href="/front-end-campus/assets/js/10.4355da50.js"><link rel="prefetch" href="/front-end-campus/assets/js/11.0693e82c.js"><link rel="prefetch" href="/front-end-campus/assets/js/12.833bf704.js"><link rel="prefetch" href="/front-end-campus/assets/js/13.ce8e8673.js"><link rel="prefetch" href="/front-end-campus/assets/js/14.2e02cd9b.js"><link rel="prefetch" href="/front-end-campus/assets/js/15.9b0006dc.js"><link rel="prefetch" href="/front-end-campus/assets/js/16.24908916.js"><link rel="prefetch" href="/front-end-campus/assets/js/17.d8a02eb5.js"><link rel="prefetch" href="/front-end-campus/assets/js/18.06c7051b.js"><link rel="prefetch" href="/front-end-campus/assets/js/19.18d2586d.js"><link rel="prefetch" href="/front-end-campus/assets/js/20.7055d8ad.js"><link rel="prefetch" href="/front-end-campus/assets/js/21.51da45cf.js"><link rel="prefetch" href="/front-end-campus/assets/js/22.9ab4e599.js"><link rel="prefetch" href="/front-end-campus/assets/js/23.e01bf3c0.js"><link rel="prefetch" href="/front-end-campus/assets/js/24.63717750.js"><link rel="prefetch" href="/front-end-campus/assets/js/25.662b4eda.js"><link rel="prefetch" href="/front-end-campus/assets/js/26.c1dba2ef.js"><link rel="prefetch" href="/front-end-campus/assets/js/27.11b7fd88.js"><link rel="prefetch" href="/front-end-campus/assets/js/28.91e1f18f.js"><link rel="prefetch" href="/front-end-campus/assets/js/29.9853aa6c.js"><link rel="prefetch" href="/front-end-campus/assets/js/30.b740968b.js"><link rel="prefetch" href="/front-end-campus/assets/js/31.06c5d7b5.js"><link rel="prefetch" href="/front-end-campus/assets/js/32.b85e2fae.js"><link rel="prefetch" href="/front-end-campus/assets/js/33.a34910cf.js"><link rel="prefetch" href="/front-end-campus/assets/js/34.127d3257.js"><link rel="prefetch" href="/front-end-campus/assets/js/35.1dc22305.js"><link rel="prefetch" href="/front-end-campus/assets/js/36.455406b3.js"><link rel="prefetch" href="/front-end-campus/assets/js/37.4af72fb7.js"><link rel="prefetch" href="/front-end-campus/assets/js/38.42df64fd.js"><link rel="prefetch" href="/front-end-campus/assets/js/39.c1603267.js"><link rel="prefetch" href="/front-end-campus/assets/js/4.9f253ee0.js"><link rel="prefetch" href="/front-end-campus/assets/js/40.abd60450.js"><link rel="prefetch" href="/front-end-campus/assets/js/41.4eb1fd5a.js"><link rel="prefetch" href="/front-end-campus/assets/js/42.c0fdc65e.js"><link rel="prefetch" href="/front-end-campus/assets/js/43.f92e638a.js"><link rel="prefetch" href="/front-end-campus/assets/js/44.2ddd4055.js"><link rel="prefetch" href="/front-end-campus/assets/js/45.3ca56706.js"><link rel="prefetch" href="/front-end-campus/assets/js/46.be3da894.js"><link rel="prefetch" href="/front-end-campus/assets/js/47.36c08e8e.js"><link rel="prefetch" href="/front-end-campus/assets/js/48.b65a383c.js"><link rel="prefetch" href="/front-end-campus/assets/js/49.3b89f4fe.js"><link rel="prefetch" href="/front-end-campus/assets/js/5.5132f798.js"><link rel="prefetch" href="/front-end-campus/assets/js/50.b3a8e578.js"><link rel="prefetch" href="/front-end-campus/assets/js/51.0618309d.js"><link rel="prefetch" href="/front-end-campus/assets/js/52.fef83cca.js"><link rel="prefetch" href="/front-end-campus/assets/js/6.44a72eee.js"><link rel="prefetch" href="/front-end-campus/assets/js/7.43cea5ed.js"><link rel="prefetch" href="/front-end-campus/assets/js/8.769e2e2f.js"><link rel="prefetch" href="/front-end-campus/assets/js/vuejs-paginate.cf39f59b.js">
    <link rel="stylesheet" href="/front-end-campus/assets/css/0.styles.80bf0f19.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div id="vuepress-theme-blog__global-layout"><section id="header-wrapper"><header id="header"><div class="header-wrapper"><div class="title"><a href="/front-end-campus/" class="nav-link home-link">å”å‡¯å¼ºçš„ç½‘ç»œåšå®¢ </a></div> <div class="header-right-wrap"><ul class="nav"><li class="nav-item"><a href="/front-end-campus/" class="nav-link">åšå®¢</a></li><li class="nav-item"><a href="/front-end-campus/tag/" class="nav-link">æ ‡ç­¾</a></li><li class="nav-item"><a href="/front-end-campus/2020/10/19/projects/" class="nav-link">æ”¶è—</a></li><li class="nav-item"><a href="https://github.com/tkiddo/front-end-campus" target="_blank" rel="noopener noreferrer" class="nav-link external">Github</a></li></ul> <div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></div></header></section> <div id="mobile-header"><div class="mobile-header-bar"><div class="mobile-header-title"><a href="/front-end-campus/" class="nav-link mobile-home-link">å”å‡¯å¼ºçš„ç½‘ç»œåšå®¢ </a> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg></div> <div class="mobile-menu-wrapper"><hr class="menu-divider"> <ul class="mobile-nav"><li class="mobile-nav-item"><a href="/front-end-campus/" class="nav-link">åšå®¢</a></li><li class="mobile-nav-item"><a href="/front-end-campus/tag/" class="nav-link">æ ‡ç­¾</a></li><li class="mobile-nav-item"><a href="/front-end-campus/2020/10/19/projects/" class="nav-link">æ”¶è—</a></li><li class="mobile-nav-item"><a href="https://github.com/tkiddo/front-end-campus" target="_blank" rel="noopener noreferrer" class="nav-link external">Github</a></li> <li class="mobile-nav-item"><!----></li></ul></div></div></div> <div class="content-wrapper"><div id="vuepress-theme-blog__post-layout"><article itemscope="itemscope" itemtype="https://schema.org/BlogPosting" class="vuepress-blog-theme-content"><header><h1 itemprop="name headline" class="post-title">
        React(Hooks)+Typescript ç±»å‹å®šä¹‰å®è·µ
      </h1> <div class="post-meta"><!----> <div class="post-meta-date"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-clock"><circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline></svg> <time pubdate itemprop="datePublished" datetime="2021-08-31T00:00:00.000Z">
      Tue Aug 31 2021
    </time></div> <ul itemprop="keywords" class="post-meta-tags"><li class="post-tag" data-v-42ccfcd5><a href="/front-end-campus/tag/React" data-v-42ccfcd5><span data-v-42ccfcd5>React</span></a></li><li class="post-tag" data-v-42ccfcd5><a href="/front-end-campus/tag/Typescript" data-v-42ccfcd5><span data-v-42ccfcd5>Typescript</span></a></li></ul></div></header> <div itemprop="articleBody" class="content__default"><p>React ç»“åˆ Typescript çš„å¼€å‘æ¨¡å¼ï¼Œåœ¨å¤§å‹é¡¹ç›®ä¸­è¿ç”¨æ¯”è¾ƒå¹¿æ³›ã€‚æœ¬æ–‡å€Ÿé‰´ï¼ˆæŠ„ï¼‰äº†ä¸€äº›æ–‡ç« ï¼Œå°±ç±»å‹å®šä¹‰åšäº†ä¸€äº›æ€»ç»“ï¼Œæœ‰æ›´å¤šçš„å¯ä»¥è¡¥å……ã€‚</p> <h2 id="æ•°æ®ç±»å‹å®šä¹‰"><a href="#æ•°æ®ç±»å‹å®šä¹‰" class="header-anchor">#</a> æ•°æ®ç±»å‹å®šä¹‰</h2> <ul><li><strong>åŸºç¡€ç±»å‹</strong></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">interface</span> <span class="token class-name">IProps</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> string<span class="token punctuation">;</span> <span class="token comment">//å­—ç¬¦ä¸²</span>
  done<span class="token operator">:</span> boolean<span class="token punctuation">;</span> <span class="token comment">//å¸ƒå°”å€¼</span>
  age<span class="token operator">:</span> number<span class="token punctuation">;</span> <span class="token comment">//æ•°å­—</span>
  list<span class="token operator">:</span> number<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// æ•°ç»„ï¼Œå®šä¹‰å…ƒç´ ç±»å‹</span>
  optional<span class="token operator">?</span><span class="token operator">:</span> string<span class="token punctuation">;</span> <span class="token comment">// å¯é€‰å‚æ•°</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li><strong>å¯¹è±¡ç±»å‹</strong></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">interface</span> <span class="token class-name">IProps</span> <span class="token punctuation">{</span>
  data<span class="token operator">:</span> object<span class="token punctuation">;</span> <span class="token comment">// ä¸æ¨èè¿™ä¹ˆå†™ï¼Œå¯¹è±¡å±æ€§å¤ªæ¨¡ç³Š</span>
  data1<span class="token operator">:</span> <span class="token punctuation">{</span>
    id<span class="token operator">:</span> number<span class="token punctuation">,</span>
    name<span class="token operator">:</span> string
  <span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token comment">// å¯¹è±¡å±æ€§ç±»å‹å®šä¹‰ï¼Œå¸¸ç”¨</span>
  dataArr<span class="token operator">:</span> <span class="token punctuation">{</span>
    id<span class="token operator">:</span> number<span class="token punctuation">,</span>
    name<span class="token operator">:</span> string
  <span class="token punctuation">}</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// å¯¹è±¡æ•°ç»„å¸¸ç”¨</span>
  dic<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token punctuation">[</span>key<span class="token operator">:</span> string<span class="token punctuation">]</span><span class="token operator">:</span> customType
  <span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token comment">// keyå€¼å¯ä»¥æ˜¯ä»»æ„å­—ç¬¦ä¸²ï¼Œå€¼é™åˆ¶ä¸ºcustomTypeè‡ªå®šä¹‰ç±»å‹</span>
  dic1<span class="token operator">:</span> Record<span class="token operator">&lt;</span>string<span class="token punctuation">,</span> customType<span class="token operator">&gt;</span><span class="token punctuation">;</span> <span class="token comment">// å’Œdicä¸€æ ·ï¼Œç”¨äº†TSå†…ç½®çš„Recordç±»å‹</span>
<span class="token punctuation">}</span>
</code></pre></div><blockquote><p>å…¶ä¸­ dic å’Œ dic1 çš„å®šä¹‰æ–¹å¼å¯ä»¥ç”¨äº ajax è¯·æ±‚çš„è¿”å›å€¼ï¼Œå› ä¸ºå­—æ®µä¸ç¡®å®šï¼Œä½† key ä¸€èˆ¬éƒ½æ˜¯å­—ç¬¦ä¸²ç±»å‹</p></blockquote> <ul><li><strong>å‡½æ•°ç±»å‹</strong></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">interface</span> <span class="token class-name">FunctionProps</span> <span class="token punctuation">{</span>
  <span class="token comment">/** ä»»æ„çš„å‡½æ•°ç±»å‹ âŒ ä¸æ¨è ä¸èƒ½è§„å®šå‚æ•°ä»¥åŠè¿”å›å€¼ç±»å‹ */</span>
  onSomething<span class="token operator">:</span> Function<span class="token punctuation">;</span>
  <span class="token comment">/** æ²¡æœ‰å‚æ•°çš„å‡½æ•° ä¸éœ€è¦è¿”å›å€¼ ğŸ˜ å¸¸ç”¨ */</span>
  <span class="token function-variable function">onClick</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
  <span class="token comment">/** å¸¦å‡½æ•°çš„å‚æ•° ğŸ˜ éå¸¸å¸¸ç”¨ */</span>
  <span class="token function-variable function">onChange</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">id<span class="token operator">:</span> number</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
  <span class="token comment">/** å¦ä¸€ç§å‡½æ•°è¯­æ³• å‚æ•°æ˜¯ React çš„æŒ‰é’®äº‹ä»¶ ğŸ˜ éå¸¸å¸¸ç”¨ */</span>
  <span class="token function">onClick</span><span class="token punctuation">(</span>event<span class="token operator">:</span> React<span class="token punctuation">.</span>MouseEvent<span class="token operator">&lt;</span>HTMLButtonElement<span class="token operator">&gt;</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li><strong>React å†…ç½®ç±»å‹</strong></li></ul> <p>å¸¸ç”¨çš„å†…ç½®ç±»å‹ï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">interface</span> <span class="token class-name">IReact</span><span class="token punctuation">{</span>
  style<span class="token operator">:</span>React<span class="token punctuation">.</span>CSSProperties <span class="token comment">//ç»„ä»¶å†…è”çš„styleå¯¹è±¡çš„ç±»å‹</span>
  node<span class="token operator">:</span>React<span class="token punctuation">.</span>ReactNode <span class="token comment">// ç±»ä¼¼&lt;div&gt;&lt;/div&gt;çš„å…ƒç´ ç±»å‹</span>
  ele<span class="token operator">:</span>React<span class="token punctuation">.</span>React<span class="token punctuation">.</span>ReactElement <span class="token comment">// ä½¿ç”¨React.createElementåˆ›å»ºçš„ï¼Œå¯ä»¥ç®€å•ç†è§£ä¸ºReactä¸­çš„JSXçš„å…ƒç´ </span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="å¦‚ä½•å®šä¹‰å‡½æ•°ç»„ä»¶çš„ç±»å‹"><a href="#å¦‚ä½•å®šä¹‰å‡½æ•°ç»„ä»¶çš„ç±»å‹" class="header-anchor">#</a> å¦‚ä½•å®šä¹‰å‡½æ•°ç»„ä»¶çš„ç±»å‹</h2> <p>React ä¸­æœ‰å¤šç§ç±»å‹å¯ä»¥ç”¨æ¥å®šä¹‰ç»„ä»¶ç±»å‹ï¼Œæ¥ä¸‹æ¥å°±ç»“åˆå®ä¾‹æ¥è®²è§£å„è‡ªçš„ç‰¹ç‚¹ã€‚</p> <p>ç°åœ¨æœ‰ä¸€ä¸ª <code>Hello</code> ç»„ä»¶ï¼Œæ¥æ”¶ä¸€ä¸ª <code>name</code> å±æ€§</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// Hello.tsx</span>
<span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>

<span class="token keyword">interface</span> <span class="token class-name">IProps</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> <span class="token function-variable function">Hello</span> <span class="token operator">=</span> <span class="token punctuation">(</span>props<span class="token operator">:</span> IProps<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>hello<span class="token operator">!</span><span class="token punctuation">{</span>props<span class="token punctuation">.</span>name<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> Hello<span class="token punctuation">;</span>
</code></pre></div><p>è¿™é‡Œç±»å‹å®šä¹‰ç”¨<code>interface</code>æˆ–è€…<code>type</code>éƒ½å¯ä»¥ï¼Œçœ‹ä¸ªäººå–œå¥½ã€‚å¦‚æœç”¨<code>type</code>ï¼Œåˆ™è¿™æ ·å†™:</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">IProps</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>ç„¶åï¼Œåœ¨çˆ¶ç»„ä»¶ä¸­æ¸²æŸ“ï¼Œå¹¶ä¼ é€’å‚æ•°</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// index.ts</span>
<span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> render <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react-dom'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> Hello <span class="token keyword">from</span> <span class="token string">'./Hello'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">'./style.css'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">App</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>Hello name<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">'world'</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token function">render</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>App <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">,</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'root'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>è¿™æ ·çš„æƒ…å†µä¸‹ï¼Œç±»å‹çš„å®šä¹‰æ˜¯æ²¡æœ‰é—®é¢˜çš„ã€‚</p> <p>ä½†ç°åœ¨æœ‰ä¸€ä¸ªæ–°çš„éœ€æ±‚ï¼Œéœ€è¦åœ¨<code>Hello</code>ç»„ä»¶ä¸­æ¸²æŸ“å…¶ä»–æ–°çš„ç»„ä»¶ã€‚æ¯”å¦‚ï¼š</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">const</span> <span class="token function-variable function">App</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>Hello name<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">'world'</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>button<span class="token operator">&gt;</span>click<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>Hello<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>è¿™ç§æƒ…å†µï¼Œæˆ‘ä»¬åªéœ€è¦åœ¨<code>Hello</code>ç»„ä»¶ä¸­æ¸²æŸ“<code>children</code>å³å¯ã€‚</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">interface</span> <span class="token class-name">IProps</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  children<span class="token operator">:</span><span class="token operator">?</span><span class="token comment">//æ€ä¹ˆå»å®šä¹‰è¿™ä¸ªchildrenç±»å‹å‘¢</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> <span class="token function-variable function">Hello</span> <span class="token operator">=</span> <span class="token punctuation">(</span>props<span class="token operator">:</span> IProps<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>hello<span class="token operator">!</span><span class="token punctuation">{</span>props<span class="token punctuation">.</span>name<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
      <span class="token punctuation">{</span>props<span class="token punctuation">.</span>children<span class="token punctuation">}</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p><code>chilren</code>æ€ä¹ˆå®šä¹‰ç±»å‹ï¼Ÿ</p> <ol><li><p><code>JSX.Element</code>: ä¸æ¨èï¼Œå•ä¸ªå­ç»„ä»¶å¯ç”¨ï¼Œæ²¡æœ‰è€ƒè™‘æ•°ç»„</p></li> <li><p><code>JSX.Element | JSX.Element[]</code>: ä¸æ¨èï¼Œæ²¡æœ‰è€ƒè™‘å­—ç¬¦ä¸² children</p></li> <li><p><code>React.ReactChild[]</code>: æ²¡æœ‰è€ƒè™‘ null</p></li> <li><p><code>React.ReactNode</code>ï¼šåŒ…å«æ‰€æœ‰ children æƒ…å†µ</p></li></ol> <p>æ‰€ä»¥ï¼Œè¿™é‡Œ<code>children</code>å®šä¹‰ä¸º<code>React.ReactNode</code>æœ€ä¸ºåˆé€‚</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">interface</span> <span class="token class-name">IProps</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  children<span class="token operator">:</span> React<span class="token punctuation">.</span>ReactNode<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>å…¶å®ï¼Œå¯¹äºå‡½æ•°ç»„ä»¶è€Œè¨€ï¼ŒReact ä¸­è¿˜æœ‰ä¸€ä¸ª <code>FC</code> å†…ç½®ç±»å‹ï¼Œä¸“é—¨ç”¨äºå‡½æ•°ç»„ä»¶ç±»å‹å®šä¹‰ã€‚ç”¨ <code>FC</code> ç»„ä»¶çš„å¥½å¤„æ˜¯ï¼Œå®ƒä¼šè‡ªåŠ¨åŒ…å« <code>children</code> ,å› æ­¤æˆ‘ä»¬ä¸ç”¨æ‰‹åŠ¨å»ä¸º <code>children</code> å®šä¹‰ç±»å‹</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token constant">FC</span> <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>

<span class="token keyword">interface</span> <span class="token class-name">IProps</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// propså‚æ•°è§£æ„ï¼Œå¯ä»¥è®¾ç½®é»˜è®¤å€¼</span>
<span class="token keyword">const</span> Hello<span class="token operator">:</span> <span class="token constant">FC</span><span class="token operator">&lt;</span>IProps<span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> name <span class="token operator">=</span> <span class="token string">'world'</span><span class="token punctuation">,</span> children <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>hello<span class="token operator">!</span><span class="token punctuation">{</span>name<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
      <span class="token punctuation">{</span>children<span class="token punctuation">}</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> Hello<span class="token punctuation">;</span>
</code></pre></div><p>ç»¼ä¸Šï¼Œ<code>FC</code>ç±»å‹æ˜¯å‡½æ•°ç»„ä»¶ç±»å‹å®šä¹‰çš„æœ€ä½³é€‰æ‹©ã€‚</p> <h3 id="hooks"><a href="#hooks" class="header-anchor">#</a> Hooks</h3> <ul><li><strong>useState</strong></li></ul> <p>å¦‚æœä½ çš„é»˜è®¤å€¼å·²ç»å¯ä»¥è¯´æ˜ç±»å‹ï¼Œåˆ™ä¸éœ€è¦æ‰‹åŠ¨å£°æ˜ç±»å‹ï¼ŒTS ä¼šè‡ªè¡Œæ¨æ–­ã€‚</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// count: numberç±»å‹</span>
<span class="token keyword">const</span> <span class="token punctuation">[</span>count<span class="token punctuation">,</span> setCount<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token function-variable function">change</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">setCount</span><span class="token punctuation">(</span>count <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>æœ‰æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦è®¾å®šåˆå§‹å€¼ä¸º<code>null</code>æˆ–<code>undefined</code>ï¼Œæ­¤æ—¶å°±è¦é€šè¿‡èŒƒå‹æ‰‹åŠ¨ä¼ å…¥ä½ æœŸæœ›çš„ç±»å‹ã€‚</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> useState <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>

<span class="token keyword">interface</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  age<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> <span class="token punctuation">[</span>person<span class="token punctuation">,</span> setPerson<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token generic-function"><span class="token function">useState</span><span class="token generic class-name"><span class="token operator">&lt;</span>Person <span class="token operator">|</span> <span class="token keyword">null</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">getName</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>person<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><blockquote><p>è¿™æ ·å½“ä½ è®¿é—®<code>person</code>ä¸Šçš„å±æ€§æ—¶ï¼Œä¼šæ”¶åˆ°<code>Object is possibly 'null'.</code>çš„æç¤ºã€‚é€šè¿‡<code>?.</code>å¯é€‰é“¾æ“ä½œç¬¦è¯­æ³•å¯ä»¥é¿å…è¿™ä¸ªé”™è¯¯ã€‚å…³äºå¯é€‰é“¾æ“ä½œæ³•å¯ä»¥ç‚¹å‡»<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/Optional_chaining" target="_blank" rel="noopener noreferrer">æ­¤å¤„<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>æŸ¥çœ‹</p></blockquote> <ul><li><strong>useEffect</strong></li></ul> <p><code>useEffect</code>ä¼ å…¥çš„å‡½æ•°ï¼Œå®ƒçš„è¿”å›å€¼è¦ä¹ˆæ˜¯ä¸€ä¸ªæ–¹æ³•ï¼ˆæ¸…ç†å‡½æ•°ï¼‰,è¦ä¹ˆå°±æ˜¯<code>undefined</code>ï¼Œå…¶ä»–æƒ…å†µéƒ½ä¼šæŠ¥é”™ã€‚</p> <p>æ¯”è¾ƒç‰¹æ®Šçš„æƒ…å†µå°±æ˜¯ï¼Œ<code>useEffect</code>ä¸­æ‰§è¡Œäº†ä¸€ä¸ª<code>async</code>å‡½æ•°ï¼Œæ¯”å¦‚:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// æç¤ºArgument of type '() =&gt; Promise&lt;void&gt;' is not assignable to parameter of type 'EffectCallback'.</span>
<span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> num <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">getCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">setCount</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>å› ä¸º async å‡½æ•°é»˜è®¤ä¼šè¿”å›ä¸€ä¸ª Promise,å¯¼è‡´ TS æŠ¥é”™</p> <p>æ¨èè¿™æ ·å†™ï¼š</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token function-variable function">fn</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> num <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">getCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">setCount</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ul><li><strong>useReducer</strong></li></ul> <p><code>useReducer</code>æ¥æ”¶ä¸¤ä¸ªå‚æ•°<code>reducer</code> å’Œ<code>initialState</code>ï¼Œåªè¦å¯¹ä¼ å…¥<code>useReducer</code>çš„<code>reducer</code>å‡½æ•°çš„<code>state</code>å’Œ<code>action</code>è¿›è¡Œç±»å‹çº¦æŸï¼Œå°±å¯ä»¥æ¨æ–­å‡ºç±»å‹ã€‚åœ¨ä½¿ç”¨<code>useReducer</code>çš„æ—¶å€™ï¼Œè”åˆç±»å‹å°±éå¸¸æœ‰ç”¨ã€‚</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> useReducer <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> initialState <span class="token operator">=</span> <span class="token punctuation">{</span> count<span class="token operator">:</span> <span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">/** è”åˆç±»å‹ï¼Œä½¿ç”¨ | è¿æ¥ */</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">ACTIONTYPE</span></span> <span class="token operator">=</span>
  <span class="token operator">|</span> <span class="token punctuation">{</span> type<span class="token operator">:</span> <span class="token string">'increment'</span><span class="token punctuation">;</span> payload<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token punctuation">}</span>
  <span class="token operator">|</span> <span class="token punctuation">{</span> type<span class="token operator">:</span> <span class="token string">'decrement'</span><span class="token punctuation">;</span> payload<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token punctuation">}</span>
  <span class="token operator">|</span> <span class="token punctuation">{</span> type<span class="token operator">:</span> <span class="token string">'reset'</span><span class="token punctuation">;</span> payload<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">reducer</span><span class="token punctuation">(</span>state<span class="token operator">:</span> <span class="token keyword">typeof</span> initialState<span class="token punctuation">,</span> action<span class="token operator">:</span> <span class="token constant">ACTIONTYPE</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">switch</span> <span class="token punctuation">(</span>action<span class="token punctuation">.</span>type<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">case</span> <span class="token string">'increment'</span><span class="token operator">:</span>
      <span class="token keyword">return</span> <span class="token punctuation">{</span> count<span class="token operator">:</span> state<span class="token punctuation">.</span>count <span class="token operator">+</span> action<span class="token punctuation">.</span>payload <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">case</span> <span class="token string">'decrement'</span><span class="token operator">:</span>
      <span class="token keyword">return</span> <span class="token punctuation">{</span> count<span class="token operator">:</span> state<span class="token punctuation">.</span>count <span class="token operator">-</span> <span class="token function">Number</span><span class="token punctuation">(</span>action<span class="token punctuation">.</span>payload<span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">case</span> <span class="token string">'reset'</span><span class="token operator">:</span>
      <span class="token keyword">return</span> <span class="token punctuation">{</span> count<span class="token operator">:</span> action<span class="token punctuation">.</span>payload <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">default</span><span class="token operator">:</span>
      <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> Counter<span class="token operator">:</span> React<span class="token punctuation">.</span><span class="token function-variable function">FC</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>state<span class="token punctuation">,</span> dispatch<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useReducer</span><span class="token punctuation">(</span>reducer<span class="token punctuation">,</span> initialState<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span><span class="token operator">&gt;</span>
      Count<span class="token operator">:</span> <span class="token punctuation">{</span>state<span class="token punctuation">.</span>count<span class="token punctuation">}</span>
      <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token punctuation">{</span> type<span class="token operator">:</span> <span class="token string">'decrement'</span><span class="token punctuation">,</span> payload<span class="token operator">:</span> <span class="token string">'5'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token operator">-</span><span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token punctuation">{</span> type<span class="token operator">:</span> <span class="token string">'increment'</span><span class="token punctuation">,</span> payload<span class="token operator">:</span> <span class="token number">5</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token operator">+</span><span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token punctuation">{</span> type<span class="token operator">:</span> <span class="token string">'reset'</span><span class="token punctuation">,</span> payload<span class="token operator">:</span> <span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>reset<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> Counter<span class="token punctuation">;</span>
</code></pre></div><p>è¿™é‡Œï¼Œ<code>ACTIONTYPE</code>æ˜¯ä¸€ä¸ªè”åˆç±»å‹ï¼Œå½“ä¼ å…¥ç‰¹å®šçš„<code>type</code>æ—¶ï¼Œå‰©ä¸‹çš„ç±»å‹<code>payload</code>ä¼šè‡ªè¡ŒåŒ¹é…åˆ¤æ–­ã€‚</p> <ul><li><strong>useRef</strong></li></ul> <p><code>useRef</code> ä¼ é€’éç©ºåˆå§‹å€¼çš„æ—¶å€™å¯ä»¥æ¨æ–­ç±»å‹ï¼Œå¯ä»¥é€šè¿‡ä¼ å…¥ç¬¬ä¸€ä¸ªæ³›å‹å‚æ•°æ¥å®šä¹‰ç±»å‹ï¼Œçº¦æŸ <code>ref.current</code> çš„ç±»å‹ã€‚</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> useLayoutEffect <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> App<span class="token operator">:</span> React<span class="token punctuation">.</span><span class="token function-variable function">FC</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> h1Ref <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">useRef</span><span class="token generic class-name"><span class="token operator">&lt;</span>HTMLDivElement <span class="token operator">|</span> <span class="token keyword">null</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">function</span> <span class="token function">changeInnerText</span><span class="token punctuation">(</span>el<span class="token operator">:</span> HTMLDivElement<span class="token punctuation">,</span> value<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    el<span class="token punctuation">.</span>innerText <span class="token operator">=</span> value<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">useLayoutEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">null</span> <span class="token operator">!==</span> h1Ref<span class="token punctuation">.</span>current<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">changeInnerText</span><span class="token punctuation">(</span>h1Ref<span class="token punctuation">.</span>current<span class="token punctuation">,</span> <span class="token string">'hello world'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token operator">&lt;</span>h1 ref<span class="token operator">=</span><span class="token punctuation">{</span>h1Ref<span class="token punctuation">}</span><span class="token operator">&gt;</span>My title<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> App<span class="token punctuation">;</span>
</code></pre></div><p>æ›´å¤šå…ƒç´ ç±»å‹å®ä¾‹ï¼š</p> <div class="language-tsx extra-class"><pre class="language-tsx"><code><span class="token comment">// &lt;div&gt; reference type</span>
<span class="token keyword">const</span> divRef <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">useRef</span><span class="token generic class-name"><span class="token operator">&lt;</span>HTMLDivElement <span class="token operator">|</span> <span class="token keyword">null</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// &lt;button&gt; reference type</span>
<span class="token class-name"><span class="token keyword">const</span></span> buttonRef <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">useRef</span><span class="token generic class-name"><span class="token operator">&lt;</span>HTMLButtonElement <span class="token operator">|</span> <span class="token keyword">null</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// &lt;br /&gt; reference type</span>
<span class="token class-name"><span class="token keyword">const</span></span> brRef <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">useRef</span><span class="token generic class-name"><span class="token operator">&lt;</span>HTMLBRElement <span class="token operator">|</span> <span class="token keyword">null</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// &lt;a&gt; reference type</span>
<span class="token class-name"><span class="token keyword">const</span></span> linkRef <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">useRef</span><span class="token generic class-name"><span class="token operator">&lt;</span>HTMLLinkElement <span class="token operator">|</span> <span class="token keyword">null</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ul><li><strong>useContext</strong></li></ul> <p>åœ¨<code>createContext</code>æ—¶åšç±»å‹çº¦æŸï¼Œæ³›å‹æœ‰è‡ªåŠ¨æ¨æ–­çš„åŠŸèƒ½ï¼Œæ‰€ä»¥<code>useContext</code>å°±ä¸éœ€è¦å†å†™ä¸Šç±»å‹äº†</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token keyword">type</span> <span class="token punctuation">{</span> <span class="token constant">FC</span> <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> useContext <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>

<span class="token keyword">interface</span> <span class="token class-name">IProps</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">interface</span> <span class="token class-name">IContext</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">prefix</span><span class="token operator">:</span> <span class="token punctuation">(</span>origin<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> context <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">createContext</span><span class="token generic class-name"><span class="token operator">&lt;</span>IContext<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token function-variable function">prefix</span><span class="token operator">:</span> <span class="token punctuation">(</span>str<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">prefix</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>str<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> Hello<span class="token operator">:</span> <span class="token constant">FC</span><span class="token operator">&lt;</span>IProps<span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> name<span class="token punctuation">,</span> children <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// æ ¹æ®åˆ›å»ºcontextæ—¶çš„ç±»å‹æ¨æ–­</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> prefix <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useContext</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>hello<span class="token operator">!</span><span class="token punctuation">{</span><span class="token function">prefix</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
      <span class="token punctuation">{</span>children<span class="token punctuation">}</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> Hello<span class="token punctuation">;</span>
</code></pre></div><h3 id="æ·»åŠ ç¬¬ä¸‰æ–¹ä¾èµ–åº“"><a href="#æ·»åŠ ç¬¬ä¸‰æ–¹ä¾èµ–åº“" class="header-anchor">#</a> æ·»åŠ ç¬¬ä¸‰æ–¹ä¾èµ–åº“</h3> <p>å½“æˆ‘ä»¬éœ€è¦åœ¨ä»£ç åº“ä¸­æ·»åŠ ç¬¬ä¸‰æ–¹ä¾èµ–çš„æ—¶å€™ï¼Œè¦åšçš„ç¬¬ä¸€ä»¶äº‹å°±æ˜¯æŸ¥çœ‹è¿™ä¸ªåº“æ˜¯å¦æ‹¥æœ‰ä¸€ä¸ªå¸¦æœ‰ <code>TypeScript</code> ç±»å‹å®šä¹‰ <code>@types</code> åŒ…ï¼Œå¯ä»¥é€šè¿‡è¿è¡Œä¸‹é¢çš„å‘½ä»¤ï¼š</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token comment"># yarn</span>
$ <span class="token function">yarn</span> <span class="token function">add</span> @types/<span class="token operator">&lt;</span>package-name<span class="token operator">&gt;</span>

<span class="token comment"># npm</span>
$ <span class="token function">npm</span> <span class="token function">install</span> @types/<span class="token operator">&lt;</span>package-name<span class="token operator">&gt;</span>

</code></pre></div><p>æ¯”å¦‚æˆ‘ä»¬æƒ³åœ¨é¡¹ç›®ä¸­å¼•å…¥ jestï¼Œå¯ä»¥åƒä¸‹é¢è¿™æ ·å®‰è£… jest ä¾èµ–ï¼š</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token comment">#yarn</span>
$ <span class="token function">yarn</span> <span class="token function">add</span> @types/jest

<span class="token comment">#npm</span>
$ <span class="token function">npm</span> <span class="token function">install</span> @types/jest
</code></pre></div><p>å¦‚æœæ²¡æœ‰æ‰¾åˆ°å¸¦æœ‰ <code>TypeScript</code> ç±»å‹å®šä¹‰ <code>@types</code> åŒ…ï¼Œä¾‹å¦‚ <code>loadsh</code> åœ¨ npm ä¸Šæ˜¯æ²¡æœ‰ <code>@types/loadsh</code> çš„ï¼Œè¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿ
é¦–å…ˆé€šè¿‡ npm æˆ–è€… yarn æ­£å¸¸å®‰è£… <code>loadsh</code> çš„ä¾èµ–ï¼š</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token comment">#yarn</span>
$ <span class="token function">yarn</span> <span class="token function">add</span> loadsh

<span class="token comment">#npm</span>
$ <span class="token function">npm</span> <span class="token function">install</span> loadsh
</code></pre></div><p>ç„¶ååœ¨é¡¹ç›®ä¸­çš„æ–°å»º <code>typings.d.ts</code> æ–‡ä»¶ï¼Œä¸º <code>loadsh</code> ä¾èµ–æ·»åŠ  <code>declare</code>ï¼ŒåŠ å…¥ä»¥ä¸‹ä»£ç ï¼š</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">declare</span> <span class="token keyword">module</span> <span class="token string">'loadsh'</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> classes<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">;</span>
  <span class="token keyword">export</span> <span class="token keyword">default</span> classes<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>ç„¶ååœ¨ <code>tsconfig.json</code> é‡Œçš„ <code>include</code> æ·»åŠ ä¸Š <code>typings.d.ts</code>:</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;include&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;typings.d.ts&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;src/**/*&quot;</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><p>æ­£å¸¸å¼•å…¥å³å¯ï¼š</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> _ <span class="token keyword">from</span> <span class="token string">'loadsh'</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="å‚è€ƒæ–‡ç« "><a href="#å‚è€ƒæ–‡ç« " class="header-anchor">#</a> å‚è€ƒæ–‡ç« </h3> <p><a href="https://juejin.cn/post/6918925846954803214#heading-20" target="_blank" rel="noopener noreferrer">React Hooks + TypeScript æœ€ä½³å®è·µ<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> <a href="https://blog.csdn.net/sinat_17775997/article/details/106465327" target="_blank" rel="noopener noreferrer">React ä¸­å¸¸è§çš„ TypeScript å®šä¹‰ä½¿ç”¨<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> <a href="https://juejin.cn/post/6910863689260204039#heading-9" target="_blank" rel="noopener noreferrer">TypeScript å¤‡å¿˜å½•ï¼šå¦‚ä½•åœ¨ React ä¸­å®Œç¾è¿ç”¨ï¼Ÿ<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></div> <footer><!----> <hr> <!----></footer></article> <div class="sticker vuepress-toc"><div class="vuepress-toc-item vuepress-toc-h2 active"><a href="#æ•°æ®ç±»å‹å®šä¹‰" title="æ•°æ®ç±»å‹å®šä¹‰">æ•°æ®ç±»å‹å®šä¹‰</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#å¦‚ä½•å®šä¹‰å‡½æ•°ç»„ä»¶çš„ç±»å‹" title="å¦‚ä½•å®šä¹‰å‡½æ•°ç»„ä»¶çš„ç±»å‹">å¦‚ä½•å®šä¹‰å‡½æ•°ç»„ä»¶çš„ç±»å‹</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#hooks" title="Hooks">Hooks</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#æ·»åŠ ç¬¬ä¸‰æ–¹ä¾èµ–åº“" title="æ·»åŠ ç¬¬ä¸‰æ–¹ä¾èµ–åº“">æ·»åŠ ç¬¬ä¸‰æ–¹ä¾èµ–åº“</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#å‚è€ƒæ–‡ç« " title="å‚è€ƒæ–‡ç« ">å‚è€ƒæ–‡ç« </a></div></div></div></div> <footer class="footer" data-v-3d9deeb8><div class="footer-left-wrap" data-v-3d9deeb8><ul class="contact" data-v-3d9deeb8></ul></div> <div class="footer-right-wrap" data-v-3d9deeb8><ul class="copyright" data-v-3d9deeb8></ul></div></footer></div><div class="global-ui"></div></div>
    <script src="/front-end-campus/assets/js/app.a4e593e1.js" defer></script><script src="/front-end-campus/assets/js/9.5c9b8525.js" defer></script><script src="/front-end-campus/assets/js/3.ae2e5539.js" defer></script><script src="/front-end-campus/assets/js/53.7bc5484f.js" defer></script>
  </body>
</html>
