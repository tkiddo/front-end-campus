(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{472:function(t,a,s){t.exports=s.p+"assets/img/git-model@2x.f3ecc3cf.png"},473:function(t,a,s){t.exports=s.p+"assets/img/PR.b9697770.png"},474:function(t,a,s){t.exports=s.p+"assets/img/tag.a1e74428.png"},532:function(t,a,s){"use strict";s.r(a);var e=s(10),n=Object(e.a)({},(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"git-flow-实践"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#git-flow-实践"}},[t._v("#")]),t._v(" Git FLow 实践")]),t._v(" "),e("p",[t._v("首先，上一张 Git Flow 开发模式的整体流程图：")]),t._v(" "),e("p",[e("img",{attrs:{src:s(472),alt:"git-flow"}})]),t._v(" "),e("p",[t._v("简短地描述整个流程：")]),t._v(" "),e("ol",[e("li",[e("p",[t._v("从开发版的分支（develop）创建工作分支（feature branches），进行功能的实现或修正")])]),t._v(" "),e("li",[e("p",[t._v("工作分支（feature branches）的修改结束后，与开发版的分支（develop）合并")])]),t._v(" "),e("li",[e("p",[t._v("重复 1 和 2，不断实现功能直至可以发布")])]),t._v(" "),e("li",[e("p",[t._v("创建用于发布的分支（release branches），处理发布的各项工作")])]),t._v(" "),e("li",[e("p",[t._v("发布工作完成后与 main 分支合并，打上版本标签（Tag）进行发布")])]),t._v(" "),e("li",[e("p",[t._v("如果发布的软件出现 BUG，以打了标签的版本为基础进行修正（hotfix）")])])]),t._v(" "),e("p",[t._v("这样描述可能还是没什么印象，现在我们来实践以下这套流程。")]),t._v(" "),e("h2",{attrs:{id:"开始一个项目"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#开始一个项目"}},[t._v("#")]),t._v(" 开始一个项目")]),t._v(" "),e("p",[t._v("我在 github 上新建了一个项目(https://github.com/唐凯强/git-flow-action)，以此作为案例。")]),t._v(" "),e("p",[t._v("首先，克隆项目远程仓库到本地。")]),t._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" clone https://github.com/唐凯强/git-flow-action\n")])])]),e("h2",{attrs:{id:"安装-git-flow"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#安装-git-flow"}},[t._v("#")]),t._v(" 安装 git-flow")]),t._v(" "),e("p",[t._v("有了项目，我们现在要安装 git-flow，各位请根据自己当前的环境进行安装。")]),t._v(" "),e("p",[t._v("以已经安装了 HomeBrew 的 Mac 为例：")]),t._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[t._v("brew "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" git-flow\n")])])]),e("p",[t._v("安装完成后运行 git flow 以确认：")]),t._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" flow\n\nusage: "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" flow "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("subcommand"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n\nAvailable subcommands are:\n   init      Initialize a new "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" repo with support "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" the branching model.\n   feature   Manage your feature branches.\n   release   Manage your release branches.\n   hotfix    Manage your hotfix branches.\n   support   Manage your support branches.\n   version   Shows version information.\n\nTry "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'git flow <subcommand> help'")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" details.\n")])])]),e("h2",{attrs:{id:"初始化-git-flow"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#初始化-git-flow"}},[t._v("#")]),t._v(" 初始化 git-flow")]),t._v(" "),e("p",[t._v("初始化 git flow 使用 init 命令，如果不打算改变默认值，则可以附上-d 参数。")]),t._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" flow init -d\n\nUsing default branch names.\n\nWhich branch should be used "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" bringing forth production releases?\n   - main\nBranch name "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" production releases: "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("main"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\nBranch name "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"next release"')]),t._v(" development: "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("develop"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n\nHow to name your supporting branch prefixes?\nFeature branches? "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("feature/"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\nRelease branches? "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("release/"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\nHotfix branches? "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("hotfix/"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\nSupport branches? "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("support/"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\nVersion tag prefix? "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])])]),e("p",[t._v("这里确定了不同类型分支的命名方法，也就是添加不同的前缀。")]),t._v(" "),e("p",[t._v("这时查看分支：")]),t._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" branch -a\n* develop\n  main\n  remotes/origin/HEAD -"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" origin/main\n  remotes/origin/main\n")])])]),e("p",[t._v("可以看到添加了开发版分支（develop），这是接下来开发的起点。因为其他同事开发其他功能也是以 develop 分支为起点的，所以需要将本地 develop 分支推送到远程以便同事拉取。")]),t._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" push origin develop\n")])])]),e("h2",{attrs:{id:"第一个功能"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#第一个功能"}},[t._v("#")]),t._v(" 第一个功能")]),t._v(" "),e("p",[t._v("现在，我们要开发第一个功能，添加一个文件"),e("code",[t._v("index.html")]),t._v("，功能命名为"),e("code",[t._v("add-index")]),t._v("。")]),t._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" flow feature start add-index\n\nSwitched to a new branch "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'feature/add-index'")]),t._v("\n\nSummary of actions:\n- A new branch "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'feature/add-index'")]),t._v(" was created, based on "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'develop'")]),t._v("\n- You are now on branch "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'feature/add-index'")]),t._v("\n\nNow, start committing on your feature. When done, use:\n\n     "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" flow feature finish add-index\n")])])]),e("p",[t._v("根据执行说明，基于开发版分支(develop)创建功能分支"),e("code",[t._v("feature/add-index")]),t._v("，当功能分支开发完毕后，执行"),e("code",[t._v("git flow feature finish add-index")])]),t._v(" "),e("p",[t._v("查看分支")]),t._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" branch\n  develop\n* feature/add-index\n  main\n")])])]),e("p",[t._v("可以看到，当前工作分支就是新创建的功能分支"),e("code",[t._v("feature/add-index")]),t._v("。")]),t._v(" "),e("p",[t._v("在当前分支上开发新功能，添加了 index.html.")]),t._v(" "),e("div",{staticClass:"language-html extra-class"},[e("pre",{pre:!0,attrs:{class:"language-html"}},[e("code",[e("span",{pre:!0,attrs:{class:"token doctype"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<!")]),e("span",{pre:!0,attrs:{class:"token doctype-tag"}},[t._v("DOCTYPE")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token name"}},[t._v("html")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("html")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("lang")]),e("span",{pre:!0,attrs:{class:"token attr-value"}},[e("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("en"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("head")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("meta")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("charset")]),e("span",{pre:!0,attrs:{class:"token attr-value"}},[e("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("UTF-8"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("meta")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("name")]),e("span",{pre:!0,attrs:{class:"token attr-value"}},[e("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("viewport"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),e("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("content")]),e("span",{pre:!0,attrs:{class:"token attr-value"}},[e("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("width=device-width, initial-scale=1.0"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("title")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("Document"),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("title")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("head")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("body")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("h1")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("Hello,World !"),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("h1")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("body")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("html")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),e("p",[t._v("然后提交作业：")]),t._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),t._v(" index.html\n\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" commit -m "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'add index.html'")]),t._v("\n")])])]),e("p",[t._v("功能开发期间，你可能希望同事能看到自己写的代码，并加以指点，这时候就需要将本地仓库推送到远程。")]),t._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" flow feature publish add-index\n\nEnumerating objects: "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),t._v(", done.\nCounting objects: "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),t._v("% "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),t._v("/4"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(", done.\nDelta compression using up to "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("8")]),t._v(" threads\nCompressing objects: "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),t._v("% "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),t._v("/3"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(", done.\nWriting objects: "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),t._v("% "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),t._v("/3"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(", "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("443")]),t._v(" bytes "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("443.00")]),t._v(" KiB/s, done.\nTotal "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("delta "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(", reused "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("delta "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(", pack-reused "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("\nremote:\nremote: Create a pull request "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'feature/add-index'")]),t._v(" on GitHub by visiting:\nremote:      https://github.com/唐凯强/git-flow-action/pull/new/feature/add-index\nremote:\nTo https://github.com/唐凯强/git-flow-action\n * "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("new branch"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("      feature/add-index -"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" feature/add-index\nAlready on "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'feature/add-index'")]),t._v("\nYour branch is up to "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("date")]),t._v(" with "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'origin/feature/add-index'")]),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(".")]),t._v("\n\nSummary of actions:\n- A new remote branch "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'feature/add-index'")]),t._v(" was created\n- The "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("local")]),t._v(" branch "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'feature/add-index'")]),t._v(" was configured to track the remote branch\n- You are now on branch "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'feature/add-index'")]),t._v("\n")])])]),e("p",[t._v("从执行说明看到，创建了远程分支"),e("code",[t._v("feature/add-index")]),t._v(",本地分支"),e("code",[t._v("feature/add-index")]),t._v("跟踪这个远程分支。")]),t._v(" "),e("p",[t._v("查看分支信息")]),t._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" branch -a\n\n  develop\n* feature/add-index\n  main\n  remotes/origin/HEAD -"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" origin/main\n  remotes/origin/develop\n  remotes/origin/feature/add-index\n  remotes/origin/main\n")])])]),e("p",[t._v("可以看到远程功能分支已经创建了。")]),t._v(" "),e("h2",{attrs:{id:"第一个功能开发完毕"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#第一个功能开发完毕"}},[t._v("#")]),t._v(" 第一个功能开发完毕")]),t._v(" "),e("p",[t._v("经过多次提交代码之后，第一个功能总算开发完毕了。这时候需要通过 GitHub 发送 Pull Request，请求 develop 分支合并 feature/add-index 分支的内容。")]),t._v(" "),e("p",[e("img",{attrs:{src:s(473),alt:"PR"}})]),t._v(" "),e("blockquote",[e("p",[t._v("注意 base 是 develop 分支，而不是 main 分支")])]),t._v(" "),e("p",[t._v("经过其他开发者审查代码，并修改之后，确认 Pull Request 没有问题，则可以合并到 develop 分支。")]),t._v(" "),e("p",[t._v("然后功能分支就开发完毕了，你可以删除该分支,也可以删除远程分支。")]),t._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" branch -d feature/add-index\n\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" push origin --delete feature/add-index\n")])])]),e("p",[t._v("当我们开发更多功能时，也是新建分支，在分支上作业，完成开发后提交 Pull Request，确认后合并到 develop 分支")]),t._v(" "),e("h2",{attrs:{id:"可以发布了"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#可以发布了"}},[t._v("#")]),t._v(" 可以发布了")]),t._v(" "),e("p",[t._v("当功能开发进行到差不多完善的时候，就可以发布版本了。首先，我们要拉取最新的 develop 分支代码")]),t._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" checkout develop\n\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" pull\n")])])]),e("p",[t._v("然后，创建 release 分支")]),t._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" flow release start v1.0.0\n\nSwitched to a new branch "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'release/v1.0.0'")]),t._v("\n\nSummary of actions:\n- A new branch "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'release/v1.0.0'")]),t._v(" was created, based on "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'develop'")]),t._v("\n- You are now on branch "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'release/v1.0.0'")]),t._v("\n\nFollow-up actions:\n- Bump the version number now"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("\n- Start committing last-minute fixes "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" preparing your release\n- When done, run:\n\n     "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" flow release finish "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'v1.0.0'")]),t._v("\n")])])]),e("p",[t._v("执行后，基于 develop 分支，新的发布分支 release/v1.0.0 创建，在该分支上，我们只处理与发布相关的提交。这里以变更版本号为例：")]),t._v(" "),e("div",{staticClass:"language-markdown extra-class"},[e("pre",{pre:!0,attrs:{class:"language-markdown"}},[e("code",[t._v("// README.md\n\n"),e("span",{pre:!0,attrs:{class:"token title important"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("#")]),t._v(" git-flow-action")]),t._v("\n\ngit flow 实践\n\nversion:v1.0.0\n")])])]),e("p",[t._v("然后，提交修改")]),t._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),t._v(" README.md\n\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" commit -m "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'release v1.0.0'")]),t._v("\n")])])]),e("p",[t._v("当与发布相关的提交处理完毕后，我们需要结束这一分支")]),t._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" flow release finish v1.0.0\n")])])]),e("p",[t._v("然后，release 分支会合并到 main 分支，在这之前会需要你填提交信息")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("Merge branch 'release/v1.0.0' into main\n# Please enter a commit message to explain why this merge is necessary,\n# especially if it merges an updated upstream into a topic branch.\n#\n# Lines starting with '#' will be ignored, and an empty message aborts\n# the commit.\n")])])]),e("p",[t._v("填写提交信息后保存退出，之后会询问版本号信息")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("#\n# Write a message for tag:\n#   v1.0.0\n# Lines starting with '#' will be ignored.\n")])])]),e("p",[t._v("一般情况下，把版本号前的"),e("code",[t._v("#")]),t._v("去掉即可")]),t._v(" "),e("p",[t._v("再后来，release 分支会合并到 develop 分支，在这之前也会询问提交信息")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("Merge branch 'release/v1.0.0' into develop\n# Please enter a commit message to explain why this merge is necessary,\n# especially if it merges an updated upstream into a topic branch.\n#\n# Lines starting with '#' will be ignored, and an empty message aborts\n# the commit.\n")])])]),e("p",[t._v("填写完提交信息后保存退出，可以看到执行信息")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("Switched to branch 'main'\nYour branch is up to date with 'origin/main'.\nMerge made by the 'recursive' strategy.\n README.md  |  5 ++++-\n index.html | 13 +++++++++++++\n 2 files changed, 17 insertions(+), 1 deletion(-)\n create mode 100644 index.html\nSwitched to branch 'develop'\nYour branch is up to date with 'origin/develop'.\nMerge made by the 'recursive' strategy.\n README.md | 5 ++++-\n 1 file changed, 4 insertions(+), 1 deletion(-)\nDeleted branch release/v1.0.0 (was 1f2e386).\n\nSummary of actions:\n- Latest objects have been fetched from 'origin'\n- Release branch has been merged into 'main'\n- The release was tagged 'v1.0.0'\n- Release branch has been back-merged into 'develop'\n- Release branch 'release/v1.0.0' has been deleted\n")])])]),e("p",[t._v("总结一下，就是")]),t._v(" "),e("ul",[e("li",[t._v("release 分支合并到了 main 分支，")]),t._v(" "),e("li",[t._v("创建了与版本号相同的 Git 标签，")]),t._v(" "),e("li",[t._v("release 分支合并到 develop 分支")]),t._v(" "),e("li",[t._v("release 分支被删除")])]),t._v(" "),e("p",[t._v("到现在为止，main 和 develop 分支都发生了改变，所以都需要提交")]),t._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" checkout develop\n\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" push origin develop\n")])])]),e("p",[t._v("然后，是 main 分支")]),t._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" checkout main\n\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" push origin main\n")])])]),e("p",[t._v("最后，提交标签信息")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("git push --tags\n")])])]),e("p",[t._v("至此，v1.0.0 版本已经发布成功了")]),t._v(" "),e("h2",{attrs:{id:"bug-出现了"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#bug-出现了"}},[t._v("#")]),t._v(" BUG 出现了")]),t._v(" "),e("p",[t._v("最新的 v1.0.0 版本出现 bug 了，需要紧急修复。")]),t._v(" "),e("p",[t._v("以 main 分支（也就是 v1.0.0 版本）为起点，创建 v1.0.1 的 hotfix 分支")]),t._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" flow hotfix start v1.0.1\n\nSwitched to a new branch "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'hotfix/v1.0.1'")]),t._v("\n\nSummary of actions:\n- A new branch "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'hotfix/v1.0.1'")]),t._v(" was created, based on "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'main'")]),t._v("\n- You are now on branch "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'hotfix/v1.0.1'")]),t._v("\n\nFollow-up actions:\n- Bump the version number now"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("\n- Start committing your hot fixes\n- When done, run:\n\n     "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" flow hotfix finish "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'v1.0.1'")]),t._v("\n")])])]),e("p",[t._v("这条命令创建了 hotfix/v1.0.1 分支，在这个分支中提交修复，并推送到远程仓库，并向 main 分支发送 Pull Request。")]),t._v(" "),e("p",[t._v("其他开发者查看 Pull Request，确认并同意合并到 main 分支。")]),t._v(" "),e("p",[t._v("然后，就是创建新的标签 v1.0.1")]),t._v(" "),e("p",[t._v("点击 Github 仓库的 release 菜单，然后点击 Draft a new release 按钮。")]),t._v(" "),e("p",[e("img",{attrs:{src:s(474),alt:"tag"}})]),t._v(" "),e("p",[t._v("然后，publish release 即可，这样，我们就多了一个标签 v1.0.1")]),t._v(" "),e("p",[t._v("最后，就是将 hotfix 分支合并到 develop 分支即可。")]),t._v(" "),e("h2",{attrs:{id:"小结"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#小结"}},[t._v("#")]),t._v(" 小结")]),t._v(" "),e("p",[t._v("这么一套下来，对 Git Flow 就有一定的理解了。")])])}),[],!1,null,null,null);a.default=n.exports}}]);