---
title: React(Hooks)+Typescript ç±»å‹å®šä¹‰å®è·µ
date: 2021-08-31
tags:
  - React
  - Typescript
---

React ç»“åˆ Typescript çš„å¼€å‘æ¨¡å¼ï¼Œåœ¨å¤§å‹é¡¹ç›®ä¸­è¿ç”¨æ¯”è¾ƒå¹¿æ³›ã€‚åœ¨ä½¿ç”¨äº†ä¸€æ®µæ—¶é—´åï¼Œå‘ç°é¡¹ç›®ä¸­å„ç§ç±»å‹çš„å®šä¹‰ï¼Œå°¤ä¸ºå¤´ç–¼ï¼Œå› æ­¤åœ¨æŸ¥çœ‹äº†å¤šç¯‡åšå®¢æ–‡ç« ä¹‹åæ€»ç»“äº†ä¸€ä¸‹ã€‚éšç€ Hooks çš„å‡ºç°ï¼Œå‡½æ•°ç»„ä»¶åŸºæœ¬ä¸Šå¯ä»¥å®Œå…¨å–ä»£ç±»ç»„ä»¶äº†ï¼Œå› æ­¤æœ¬æ–‡ç€é‡è®²å‡½æ•°ç»„ä»¶çš„å¼€å‘å®è·µã€‚

## æ•°æ®ç±»å‹å®šä¹‰

- **åŸºç¡€ç±»å‹**

```js
interface IProps {
  name: string; //å­—ç¬¦ä¸²
  done: boolean; //å¸ƒå°”å€¼
  age: number; //æ•°å­—
  list: number[]; // æ•°ç»„ï¼Œå®šä¹‰å…ƒç´ ç±»å‹
  optional?: string; // å¯é€‰å‚æ•°
}
```

- **å¯¹è±¡ç±»å‹**

```js
interface IProps {
  data: object; // ä¸æ¨èè¿™ä¹ˆå†™ï¼Œå¯¹è±¡å±æ€§å¤ªæ¨¡ç³Š
  data1: {
    id: number,
    name: string
  }; // å¯¹è±¡å±æ€§ç±»å‹å®šä¹‰ï¼Œå¸¸ç”¨
  dataArr: {
    id: number,
    name: string
  }[]; // å¯¹è±¡æ•°ç»„å¸¸ç”¨
  dic: {
    [key: string]: customType
  }; // keyå€¼å¯ä»¥æ˜¯ä»»æ„å­—ç¬¦ä¸²ï¼Œå€¼é™åˆ¶ä¸ºcustomTypeè‡ªå®šä¹‰ç±»å‹
  dic1: Record<string, customType>; // å’Œdicä¸€æ ·ï¼Œç”¨äº†TSå†…ç½®çš„Recordç±»å‹
}
```

> å…¶ä¸­ dic å’Œ dic1 çš„å®šä¹‰æ–¹å¼å¯ä»¥ç”¨äº ajax è¯·æ±‚çš„è¿”å›å€¼ï¼Œå› ä¸ºå­—æ®µä¸ç¡®å®šï¼Œä½† key ä¸€èˆ¬éƒ½æ˜¯å­—ç¬¦ä¸²ç±»å‹

- **å‡½æ•°ç±»å‹**

```js
interface FunctionProps {
  /** ä»»æ„çš„å‡½æ•°ç±»å‹ âŒ ä¸æ¨è ä¸èƒ½è§„å®šå‚æ•°ä»¥åŠè¿”å›å€¼ç±»å‹ */
  onSomething: Function;
  /** æ²¡æœ‰å‚æ•°çš„å‡½æ•° ä¸éœ€è¦è¿”å›å€¼ ğŸ˜ å¸¸ç”¨ */
  onClick: () => void;
  /** å¸¦å‡½æ•°çš„å‚æ•° ğŸ˜ éå¸¸å¸¸ç”¨ */
  onChange: (id: number) => void;
  /** å¦ä¸€ç§å‡½æ•°è¯­æ³• å‚æ•°æ˜¯ React çš„æŒ‰é’®äº‹ä»¶ ğŸ˜ éå¸¸å¸¸ç”¨ */
  onClick(event: React.MouseEvent<HTMLButtonElement>): void;
}
```

- **React å†…ç½®ç±»å‹**

```js
interface IReact{
  style:React.CSSProperties //ç»„ä»¶å†…è”çš„styleå¯¹è±¡çš„ç±»å‹
  node:React.ReactNode // ç»„ä»¶èŠ‚ç‚¹ç±»å‹
  ele:React.React.ReactElement // ä½¿ç”¨React.createElementåˆ›å»ºçš„ï¼Œå¯ä»¥ç®€å•ç†è§£ä¸ºReactä¸­çš„JSXçš„å…ƒç´ 
}
```

## å¦‚ä½•å®šä¹‰å‡½æ•°ç»„ä»¶çš„ç±»å‹

React ä¸­æœ‰å¤šç§ç±»å‹å¯ä»¥ç”¨æ¥å®šä¹‰ç»„ä»¶ç±»å‹ï¼Œæ¥ä¸‹æ¥å°±ç»“åˆå®ä¾‹æ¥è®²è§£å„è‡ªçš„ç‰¹ç‚¹ã€‚

ç°åœ¨æœ‰ä¸€ä¸ª `Hello` ç»„ä»¶ï¼Œæ¥æ”¶ä¸€ä¸ª `name` å±æ€§

```js
// Hello.tsx
import React from 'react';

interface IProps {
  name: string;
}

const Hello = (props: IProps) => {
  return (
    <div>
      <div>hello!{props.name}</div>
    </div>
  );
};

export default Hello;
```

è¿™é‡Œç±»å‹å®šä¹‰ç”¨`interface`æˆ–è€…`type`éƒ½å¯ä»¥ï¼Œçœ‹ä¸ªäººå–œå¥½ã€‚å¦‚æœç”¨`type`ï¼Œåˆ™è¿™æ ·å†™:

```js
type IProps = {
  name: string
};
```

ç„¶åï¼Œåœ¨çˆ¶ç»„ä»¶ä¸­æ¸²æŸ“ï¼Œå¹¶ä¼ é€’å‚æ•°

```js
// index.ts
import React from 'react';
import { render } from 'react-dom';
import Hello from './Hello';
import './style.css';

const App = () => {
  return (
    <div>
      <Hello name={'world'} />
    </div>
  );
};

render(<App />, document.getElementById('root'));
```

è¿™æ ·çš„æƒ…å†µä¸‹ï¼Œç±»å‹çš„å®šä¹‰æ˜¯æ²¡æœ‰é—®é¢˜çš„ã€‚

ä½†ç°åœ¨æœ‰ä¸€ä¸ªæ–°çš„éœ€æ±‚ï¼Œéœ€è¦åœ¨`Hello`ç»„ä»¶ä¸­æ¸²æŸ“å…¶ä»–æ–°çš„ç»„ä»¶ã€‚æ¯”å¦‚ï¼š

```js
const App = () => {
  return (
    <div>
      <Hello name={'world'}>
        <button>click</button>
      </Hello>
    </div>
  );
};
```

è¿™ç§æƒ…å†µï¼Œæˆ‘ä»¬åªéœ€è¦åœ¨`Hello`ç»„ä»¶ä¸­æ¸²æŸ“`children`å³å¯ã€‚

```js
interface IProps {
  name: string;
  children:?//æ€ä¹ˆå»å®šä¹‰è¿™ä¸ªchildrenç±»å‹å‘¢
}

const Hello = (props: IProps) => {
  return (
    <div>
      <div>hello!{props.name}</div>
      {props.children}
    </div>
  );
};
```

`chilren`æ€ä¹ˆå®šä¹‰ç±»å‹ï¼Ÿ

1. `JSX.Element`: ä¸æ¨èï¼Œå•ä¸ªå­ç»„ä»¶å¯ç”¨ï¼Œæ²¡æœ‰è€ƒè™‘æ•°ç»„

2. `JSX.Element | JSX.Element[]`: ä¸æ¨èï¼Œæ²¡æœ‰è€ƒè™‘å­—ç¬¦ä¸² children

3. `React.ReactChild[]`: æ²¡æœ‰è€ƒè™‘ null

4. `React.ReactNode`ï¼šåŒ…å«æ‰€æœ‰ children æƒ…å†µ

æ‰€ä»¥ï¼Œè¿™é‡Œ`children`å®šä¹‰ä¸º`React.ReactNode`æœ€ä¸ºåˆé€‚

```js
interface IProps {
  name: string;
  children: React.ReactNode;
}
```

å…¶å®ï¼Œå¯¹äºå‡½æ•°ç»„ä»¶è€Œè¨€ï¼ŒReact ä¸­è¿˜æœ‰ä¸€ä¸ª `FC` å†…ç½®ç±»å‹ï¼Œä¸“é—¨ç”¨äºå‡½æ•°ç»„ä»¶ç±»å‹å®šä¹‰ã€‚ç”¨ `FC` ç»„ä»¶çš„å¥½å¤„æ˜¯ï¼Œå®ƒä¼šè‡ªåŠ¨åŒ…å« `children` ,å› æ­¤æˆ‘ä»¬ä¸ç”¨æ‰‹åŠ¨å»ä¸º `children` å®šä¹‰ç±»å‹

```js
import React, { FC } from 'react';

interface IProps {
  name: string;
}

const Hello: FC<IProps> = ({ name, children }) => {
  return (
    <div>
      <div>hello!{name}</div>
      {children}
    </div>
  );
};

export default Hello;
```

ç»¼ä¸Šï¼Œ`FC`ç±»å‹æ˜¯å‡½æ•°ç»„ä»¶ç±»å‹å®šä¹‰çš„æœ€ä½³é€‰æ‹©ã€‚

### Hooks
